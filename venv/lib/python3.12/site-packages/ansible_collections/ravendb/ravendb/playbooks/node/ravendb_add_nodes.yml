---
- name: Form Cluster
  hosts: localhost
  gather_facts: no
  

  tasks:
    - name: Join Node B as Watcher (check_mode)
      ravendb.ravendb.node:
        tag: B
        type: "Watcher"
        url: "http://192.168.100.15:8080"
        leader_url: "http://192.168.100.16:8080"
      check_mode: yes

    - name: Join Node B as Watcher
      ravendb.ravendb.node:
        tag: B
        type: "Watcher"
        url: "http://192.168.100.15:8080"
        leader_url: "http://192.168.100.16:8080"

    - name: Join Node B as Watcher (idempotency check)
      ravendb.ravendb.node:
        tag: B
        type: "Watcher"
        url: "http://192.168.100.15:8080"
        leader_url: "http://192.168.100.16:8080"


    - name: Join Node C as Member
      ravendb.ravendb.node:
        node:
          tag: C
          url: "http://192.168.100.15:8080"
          leader_url: "http://192.168.100.16:8080"